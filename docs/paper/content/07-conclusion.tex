%
\section{Evaluation}
\label{sec:evaluation}
% Owner: Jani
% Reviewed:
%
Within the first simulation rounds, we already gained several interesting insights regarding the merchant performance and the system load needed to be handled. Additionally, the generated data sizes will be addressed.

\subsection{Merchant Performance}
\label{sec:merchant_evaluation}
% Owner: Jani
% Reviewed:
%
An exemplary data-driven approach based on a logistic regression pricing model promises higher profits than common rule-based behaviors already in the first simulation rounds. It is noteworthy that this is achieved through a better adjustment to the consumer behavior in pricing.

% Undoubtedly, the data-driven approach adapts quicker to changes in consumer behavior than conventional approaches. --> johanna: The "conventional" approaches adapten gar nicht, deshalb sind sie ja so schlecht (also theoretisch...).


\todo[inline]{todo and add pair-wise merchant evaluation here}


%
\subsection{Produced Data Sizes}
% Owner: Johanna
% Reviewed:
%

We did an evaluation of the data size produced by a simulation using the following benchmarks:
\begin{itemize}
    \item Duration: 1 hour
    \item Products: 4000 with 4 different qualities each, i.e. 16,000 products in total
    \item Merchants: 4 merchants
    \begin{itemize}[nosep]
        \item 750 products in stock per merchant
        \item 17 requests per second per merchant
    \end{itemize}
    \item Consumer: 17 purchases per minute
\end{itemize}

The amount of data generated and persisted per service can be seen in Table \ref{table:generated_data}.

\begin{table}[ht]
\centering
\caption{Data size generated by a 1-hour simulation with x merchants, 4000 products and max. 2000 actions per minute}
\label{table:generated_data}
\begin{tabular}{|l|r|}
\hline
\textbf{Service} & \textbf{Data Size} \\ \hline \hline
Kafka            & 2.3 GB             \\ \hline
Merchants (total)       & 25 MB      \\ \hline
Marketplace      & 24 MB              \\ \hline
Producer         & 4 MB               \\ \hline
UI               & 2 MB               \\ \hline
Consumer         & 60 KB              \\ \hline
\end{tabular}
\end{table}

\todo[inline]{is this really data generated in one hour? I think it also includes data that is just always present, eg the 4 MB at the producer won’t change anymore, they are just due to the high number of products } 
\todo[inline]{we started with 7 merchants, one stopped at the beginning and two died later - do we say we tested it with 4, 5, 6 or 7 merchants...?}


%@Todo: include data
%Simulation 1 Stunde, 4000 Produkte à 4 Qualitäten, max 1000 Aktionen (Updates / Käufe) pro Minute, 750 Offer pro Merchant
%06: 25 MB
%05: 2,3 GB
%04: 24 MB
%03: 4 MB
%02: 2 MB
%01: 60 KB


\subsection{System Load}
\label{sec:system_evaluation}
% Owner: 
% Reviewed:
%
The developed system is able to handle very high loads in terms of the number of merchants, offers or products. The only potentially problematic bottlenecks are the user interface (see also Chapter \ref{sec:FutureWork}) and the amount of produced data as stated in the previous section, depending on the duration of the simulation and the underlying machine's capacities.  \\

As shown during the evaluation of the data sizes, a very high number of products is no problem for the system - only the creation of those 4000 products took some time, but the overall performance of the simulation itself was not affected negatively. 

The load on the marketplace is determined by the number of requests per minute that a merchant and the consumer can make. This number is adjustable to allow the simulation of times of higher or lower demand on the consumer side (such as Christmas) or to simply speed up the simulation if all parameters are increased equally. As also implied above, we ran simulations with more than 100 requests per second without any problems

\todo[inline]{kann jemand abschätzen, was das maximum an gesamt-requests ist, das wir bisher problemlos getestet haben/handeln könnten?}
\todo[inline]{können wir ne abschätzung geben, wie viele merchants max laufen können (gegeben max anzahl von requests von x/minute)?}


\section{Future Work}
\label{sec:FutureWork}
% Owner: Jani, Johanna
% Reviewed: 
%
While providing an easy and comprehensive way to simulate different market situations based on a variety of consumer behaviors and competing merchants, the current solution still has a lot of potential for extension and improvement. \\

In the current setup, the producer only offers goods without any expiration date. But when thinking about plane or festival tickets, perishables or any other short-life products, pricing strategies might perform very differently and have to adapt to completely new features. Thus, it would be interesting to add the possibility to offer such perishable products. In consequence, a more comprehensive notion of time would have to be introduced throughout the whole system, and the marketplace would have to check and verify a product's expiration date with the producer. Additionally, the behaviors of the consumer as well as within the merchants need to react one those additional attributes.\\

Another very interesting case to cover in the near future could be consumer ratings and how they influence pricing strategies. Having now such an environment to simulate different market situations and consumer demands, different consumer ratings may also influence pricing strategies significantly. \\

Components of the current solution that need further revision in the future are the UI and also the Kafka-components.

The user interfaces turn out to be a bottleneck in the current setup when the simulation is under a high load, i.e. there are many price updates and sales. Especially the real-time price interaction graphs start to lag heavily or even crash the browser under high load, making parts of the UI almost unusable. To solve this problem, a complete refactoring of this UI component or a switch of the underlying third party charts library might be necessary.

The Kafka-components might need to be refactored in terms of the size of the produced data. As shown in Chapter \ref{sec:evaluation}, the amount of data produced in just one hour of simulation is above 2 GB. While that amount should be rather easy to handle on most systems, potential long term simulation - as might be needed for more sophisticated data-driven pricing strategies or simply long-term algorithm evaluations - might produce more problematic data amounts. A more considerate handling of outdated data as well as a stronger compression of current data might be needed. 


%OLD: We are aware that the current solution is far from being perfect. One is already able to simulate different market situations based on a variety of consumer behaviors and competing merchants, however, this solution can be extended to cover even more possibilities. Currently, the producer may provide goods without any expiration date. But when thinking about plane or festival tickets, perishables or any other short-life products, those can be also included in a later step as simulation content. If so, the producer may include an expiration date and optionally a cap of items (for the air plane case) which consequently has to be checked and verified by the marketplace. Additionally, the behaviors by the consumer as well as within the merchants may need to react one those additional attributes.\\

\section{Conclusion}
\label{sec:conclusion}
% Owner: Jani
% Reviewed:
%
In this work, we presented a distributed and scalable platform to imitate market situations and simulate dynamic pricing algorithms and their effects with potential real world settings. With this toolkit, handler may be enabled to evaluate their pricing strategies appropriately before releasing them into the real world where they can create huge loses. Simultaneously, students and researchers may now implement and evaluate how pricing strategies react and interact based on influences and against each other.\\

The source code and its technical documentation will be publicly available at github.com\footnote{\url{https://github.com/hpi-epic/masterproject-pricewars}}
while a screencast is accessible on YouTube\footnote{\url{https://www.youtube.com/watch?v=bqXSi5cv8cE}}.
